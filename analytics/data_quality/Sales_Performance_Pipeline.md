# Sales Performance pipeline
This pipeline measures retail sales performance over the past few years across various branches of Staples.

## Group

V3 Analytics America/New_York 1

- Varuna Manevannan


## Problem Statement
[State the problem you're trying to solve]
- What are the best and worst selling products?
- What are the products that are being returned the most?
- Which region is generating the highest YoY profits?
- What's the distribution of home office vs. coroporate purchases in Technology?
- Which product has the right balance between profit margin and sales volume?
- Identify the managerial demographic that brings in the maximum revenue.
- 
## Business Metrics

[List out the business metrics your pipeline is responsible for supporting]

| Metric Name      | Metric Derivation    | Increase Desired? |
|------------------|----------------------|-------------------|
| m_quantity_sold  | SUM(quantity)        | YES               |
| m_profit         | SUM(profit)          | YES               |
| m_returns_made   | COUNT(returned =1 )  | NO                |


## Assumptions

[List out the assumptions that your ETL process will make in order to generate the expected results]

## Upstream Sources
Orders 

order_id 
order_date
region_id
ship_date
ship_mode
product_id
quantity
discount
profit 

Product 
product_id
product_category
product_subcategory 
product_name
product_date : date product was introduced

Returns
order_id
returned

Management
region_id
supervisor_id
supervisor_name 
date_joined : date supervisor joined org.

## Pipeline Diagram
[Staples_sales_ERD.pdf](Staples_sales_ERD.pdf)

## Data Schemas/Modeling


[Document the schemas of the tables that will be generated by your pipeline in markdown tables. See this example:]
staples.fct_prod_details
monthly_product_metrics( product_id INT,  metric_name VARCHAR, metric_value BIGINT, DATE DATE )

 Column               | Data Type | Description                                                               |
|----------------------|-----------|---------------------------------------------------------------------------|
| product_id           | DATE      | Unique Identifier for each product                                        |
| dim_product_name     | TEXT      | Description of product                                                    |
| dim_product_category | TEXT      | Category: HomeOffice, Technology, OfficeSupplies                          |
| dim_region_id        | TEXT      | Region: Central, East, South, West                                        |
| m_quantity_sold      | TEXT      | Derived type based on quantity sold on all orders of this product         |
| m_profit             | BIG INT   | Amount of profit from this product (in $)                                 |
| m_returns_made       | TEXT      | Derived type based on the number of returns on all orders of this product |
| dim_product_date     | DATE      | Date the product was introduced into Staples inventory                    |
| date                 | DATE      | Start date of every month                                                 |


staples.dim_manager_details
quarterly_manager_metrics (supervisor_id INT, metric_name VARCHAR, metric_value BIGINT, DATE DATE )
  
Column                 | Data Type | Description                                                                              |
|----------------------|-----------|------------------------------------------------------------------------------------------|
| supervisor_id        | DATE      | Unique Identifier for each supervisor                                                    |
| dim_supervisor_name  | TEXT      | Name of the manager                                                                      |
| dim_region_id        | TEXT      | Region: Central, East, South, West                                                       |
| m_profit             | REAL      | Amount of profit for that quarter from all products for this supervisor (in $)           |
| m_returns_made       | INT       | Derived type based on the number of returns in all orders that month for this supervisor |
| date_joined          | DATE      | Date the supervisor joined Staples                                                       |


staples.prod_agg

 Column               | Data Type    | Description                                                               |
|----------------------|--------------|---------------------------------------------------------------------------|
| dim_product_name     | TEXT         | Description of product                                                    |
| dim_product_category | TEXT         | Category: HomeOffice, Technology, OfficeSupplies                          |
| dim_region_id        | TEXT         | Region: Central, East, South, West                                        |
| m_quantity_sold      | TEXT         | Derived type based on quantity sold on all orders of this product         |
| m_profit             | BIG INT      | Amount of profit from this product (in $)                                 |
| m_returns_made       | BIG INT      | Derived type based on the number of returns on all orders of this product |
| aggregation_level    | BIG INT      | Group By product_name, product_category, region_id                        |
| date                 | DATE         | PARTITION KEY                                                             |


staples.manager_agg

 Column              | Data Type    | Description                                      |
|---------------------|--------------|--------------------------------------------------|
| dim_supervisor_name | TEXT         | Name of the supervisor                           |
| dim_region_id       | TEXT         | Region for this supervisor                       |
| dim_year_joined     | DATE         | Year the supervisor joined Staples               |
| m_profit            | REAL         | Amount of profit for that quarter (in $)         |
| aggregation_level   | BIG INT      | Group By supervisor_name, region_id, year_joined |
| date                | DATE         | PARTITION KEY                                    |



## Data Quality Checks

| Column               | Data Quality Check                       |
|----------------------|------------------------------------------|
| date                 | Ensure values are in YYYY-MM-DD format.  |
| dim_product_category | Ensure values are non-null and within expected list. |
| m_profit             | Ensure measures are non-negative and numeric. |
| m_returns            | Ensure measures are non-negative and numeric.    |
| m_quantity_sold      | Ensure measures are non-negative and numeric.    |



| Column        | Data Quality Check                                  |
|---------------|-----------------------------------------------------|
| year_joined   | Ensure values are in YYYY-MM-DD format.              |
| dim_region_id | Ensure values are non-null and within expected list.|
| m_profit      | Ensure values are non-negative and numeric.         |
